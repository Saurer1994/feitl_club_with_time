(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"713b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("q-stepper",{staticStyle:{height:"100%"},attrs:{vertical:"",color:"primary",animated:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{attrs:{name:1,title:"Wähle ein Startdatum - gewähltes Datum ab "+e.date+" - 00:00Uhr",icon:"settings",done:e.step>12}},[a("q-date",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("q-stepper-navigation",[a("q-btn",{attrs:{color:"primary",disable:!e.date,label:"Weiter"},on:{click:function(t){e.step=2}}})],1)],1),a("q-step",{attrs:{name:2,title:"Lade den Whatsapp Verlauf hier hoch",icon:"settings",done:e.step>2}},[a("q-uploader",{staticStyle:{"max-width":"300px"},on:{added:e.receiveFile}}),a("q-stepper-navigation",[a("q-btn",{attrs:{color:"primary",disable:!e.allMessagesFormatted.length,label:"Weiter"},on:{click:function(t){e.step=3}}})],1)],1),a("q-step",{attrs:{name:3,title:"Datei exportieren",icon:"create_new_folder",done:e.step>3}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n          Hier werden die Datensätze zur Kontrolle angezeigt. Sollten Personen nicht identifizierbar sein, kannst du diese anpassen.\n          Es sind "+e._s(e.countNotKnown)+" Personen nicht identifizierbar.\n        ")]),a("q-table",{staticStyle:{"max-width":"900px"},attrs:{data:e.allMessagesFormatted,columns:e.columns,"rows-per-page-options":[7,10]},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"date",attrs:{props:t}},[e._v("\n                "+e._s(t.row.date)+"\n              ")]),a("q-td",{key:"name",style:"NICHT IDENTIFIZIERBAR"===t.row.name?"background-color: orangered":"",attrs:{props:t}},[a("q-input",{attrs:{dense:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}})],1),a("q-td",{key:"message",attrs:{props:t}},[e._v("\n                "+e._s(t.row.message)+"\n              ")]),a("q-td",{key:"message",attrs:{props:t}},[a("q-btn",{staticClass:"glossy",attrs:{round:"",color:"red",icon:"delete"},on:{click:function(a){return e.deleteRow(t)}}})],1),a("q-td",[a("q-btn",{staticClass:"glossy",attrs:{color:"green",label:"Auf 2 Teilen"},on:{click:function(a){return e.makeTwoRows(t)}}})],1)],1)]}}])}),a("q-stepper-navigation",[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("q-btn",{staticStyle:{"margin-bottom":"10px","max-width":"300px"},attrs:{color:"primary",disable:!!e.allMessagesFormatted.find((function(e){return"NICHT IDENTIFIZIERBAR"===e.name})),label:"Download"},on:{click:e.finishSteps}}),a("q-btn",{staticStyle:{"max-width":"300px"},attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(t){e.step=1}}})],1)])],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Your address")])]),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Add address"}})],1)],1)],1)],1)},s=[],l=a("a6f4"),o=a("a357"),i=a("5a0c"),r=a.n(i),c=Object(l["c"])({name:"MainLayout",setup(){const e=Object(l["d"])(1),t=Object(l["d"])(),a=Object(l["d"])([]),n=Object(l["d"])(r()().format("YYYY/MM/DD")),s=Object(l["d"])(0),i=Object(l["a"])((()=>r()(n.value).startOf("day").valueOf())),c=e=>{s.value=0;const t=e.toUpperCase(),n=t.split("\r\n");for(const l of n)if(l.includes("€")||l.includes("SELBSTANZEIGE")||l.includes("EURO")||l.includes("EUR")){const e=l.substring(1,19),t=l.split("]")[1].substring(l.split("]")[1].indexOf(":")+2),n=t.split(" "),o=[];if(3===n.length){for(const e of n)e.includes("€")||Number(e)||o.push(e);2==o.length?a.value.push({date:e,name:o[0]+" "+o[1],message:t}):(s.value=s.value+1,a.value.push({date:e,name:"NICHT IDENTIFIZIERBAR",message:t}))}else s.value=s.value+1,a.value.push({date:e,name:"NICHT IDENTIFIZIERBAR",message:t})}a.value.length&&(a.value=a.value.filter((e=>{const t=e.date.split(",")[0].split("."),a=r()("20"+t[2]+"/"+t[1]+"/"+t[0]).valueOf();return a>=i.value})))},p=e=>{const t=new FileReader;t.onload=function(){t.result&&c(t.result.toString())},t.readAsText(e[0])},d=e=>{a.value=[];const t=new FileReader;t.onload=function(){if(t.result){const e=t.result.toString().toUpperCase(),n=e.split("\n");n.shift();for(const t of n){const e=t.split(",");a.value.push({date:e[0]+""+e[1],name:e[2],message:e[3]})}}},t.readAsText(e[0])},u=[{name:"date",label:"Datum",field:"date",align:"left"},{name:"name",align:"left",label:"Name",field:"name",style:"width: 100%"},{name:"message",align:"left",label:"Nachricht",field:"message",style:"width: 200px"}],m=e=>{const t=[];t.push({0:"name",1:"amount"});for(const a of e){a.name=a.name.toUpperCase();const e=a.name.split(" ").sort(),n=e.join(" "),s=t.find((e=>e.name===n));(null===s||void 0===s?void 0:s.amount)?s.amount=s.amount+2:t.push({name:a.name,amount:2})}return t.map((e=>Object.values(e).toString())).join("\n")},f=()=>{Object(o["a"])("table-export.csv",m(a.value),"text/csv"),e.value=3},b=e=>{const t=JSON.parse(JSON.stringify(e));t.rowIndex>-1&&a.value.splice(t.rowIndex,1)},g=()=>{e.value=3,f()},v=e=>{const t=JSON.parse(JSON.stringify(e));a.value.splice(Number(t.rowIndex),0,t.row)};return{makeTwoRows:v,finishSteps:g,deleteRow:b,receiveNewFile:d,exportTable:f,openDialog:t,countNotKnown:s,columns:u,allMessagesFormatted:a,step:e,date:n,timeStamp:i,receiveFile:p}}}),p=c,d=a("2877"),u=a("f531"),m=a("87fe"),f=a("52ee"),b=a("b19c"),g=a("9c40"),v=a("ee89"),w=a("eaac"),h=a("bd08"),x=a("db86"),y=a("27f9"),q=a("24e8"),S=a("f09f"),I=a("a370"),N=a("4b7e"),k=a("7f67"),O=a("eebe"),T=a.n(O),D=Object(d["a"])(p,n,s,!1,null,null,null);t["default"]=D.exports;T()(D,"components",{QStepper:u["a"],QStep:m["a"],QDate:f["a"],QStepperNavigation:b["a"],QBtn:g["a"],QUploader:v["a"],QTable:w["a"],QTr:h["a"],QTd:x["a"],QInput:y["a"],QDialog:q["a"],QCard:S["a"],QCardSection:I["a"],QCardActions:N["a"]}),T()(D,"directives",{ClosePopup:k["a"]})}}]);